"use strict"
define("pwschess/app",["exports","pwschess/resolver","ember-load-initializers","pwschess/config/environment"],function(e,t,r,i){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Application.extend({modulePrefix:i.default.modulePrefix,podModulePrefix:i.default.podModulePrefix,Resolver:t.default});(0,r.default)(n,i.default.modulePrefix),e.default=n}),define("pwschess/controllers/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({queryParams:["fen"],fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",move:"",board:Ember.computed(function(){var e,t,r=[]
for(e=0;e<4;e++){for(t=0;t<4;t++)r.push("tile white"),r.push("tile black")
for(t=0;t<4;t++)r.push("tile black"),r.push("tile white")}return r}),boardArray:Ember.computed("fen",function(){var e,t=Ember.get(this,"fen").toString(),r=[]
t=(t=t.replace(/ .+$/,"")).replace(/\//g,"")
var i,n=0
for(e=0;e<t.length;e++){var a=t[e]
if(isNaN(a))r[n]=a,n++
else for(var s=0;s<Number(a);s++)r[n]=1,n++}if(64!==n)for(r=[],i=0;i<64;i++)r[i]=1
return r}),validMove:Ember.computed("move","boardArray","fenInfo",function(){var e=Ember.get(this,"move"),t=Ember.get(this,"fenInfo"),r=Ember.get(this,"boardArray").toArray(),i=this.mvToMoveObject(t,e,r)
return!!this.checkValid(i).valid}),tiles:Ember.computed("board","boardArray",function(){var e,t=Ember.get(this,"board").toArray(),r=Ember.get(this,"boardArray").toArray()
for(e=0;e<r.length;e++){var i=r[e]
1!==i&&(t[e]=t[e]+" "+this.fenToMbn(i))}return t}),fenInfo:Ember.computed("fen",function(){var e=Ember.get(this,"fen").toString()
if(e){var t=e,r=(e=e.replace(/^.+? /,"")).split(" ")
if(5==r.length){var i=r[2]
return i=i.replace(/-/g,""),{FenTrue:!0,Fen:t,ToMove:r[0],CastlingWk:r[1].includes("K"),CastlingWq:r[1].includes("Q"),CastlingBk:r[1].includes("k"),CastlingBq:r[1].includes("q"),EnPassant:i}}}return{FenTrue:!1}}),checkValid:function(e){var t=!1
if(e.valid){var r=e.fromIndex,i=e.toIndex,n=e.piecePromotion,a=e.b,s=[]
s[0]=r%8+1,s[1]=8-Math.floor(r/8),s[2]=i%8+1,s[3]=8-Math.floor(i/8)
var o=a[r]
if("w"===e.ToMove&&this.isBlack(a[r]))return!1
if("b"===e.ToMove&&this.isWhite(a[r]))return!1
if(s[3]<1||s[3]>8)return!1
"P"===o&&(r-i==8&&this.isEmpty(a[i])&&(t=!0),"2"==s[1]&&r-i==16&&this.isEmpty(a[i])&&this.isEmpty(a[r-8])&&(t=!0),r-i!=9&&r-i!=7||!this.isBlack(a[i])||s[3]-s[1]!=1||(t=!0),r-i!=9&&r-i!=7||!this.isEmpty(a[i])||s[3]-s[1]!=1||e.EnPassant===i&&(t=!0),8==s[3]&&!0===t&&(t=!1,"n"!==n&&"b"!==n&&"r"!==n&&"q"!==n||(t=!0))),"p"===o&&(i-r==8&&this.isEmpty(a[i])&&(t=!0),"7"==s[1]&&i-r==16&&this.isEmpty(a[i])&&this.isEmpty(a[r+8])&&(t=!0),i-r!=9&&i-r!=7||!this.isWhite(a[i])||s[3]-s[1]!=-1||(t=!0),i-r!=9&&i-r!=7||!this.isEmpty(a[i])||s[3]-s[1]!=-1||e.EnPassant===i&&(t=!0),1==s[3]&&!0===t&&(t=!1,"n"!==n&&"b"!==n&&"r"!==n&&"q"!==n||(t=!0))),"N"===o&&(i-r!=-17&&i-r!=-15||!this.isBlackOrEmpty(a[i])||s[3]-s[1]!=2||(t=!0),i-r!=17&&i-r!=15||!this.isBlackOrEmpty(a[i])||s[3]-s[1]!=-2||(t=!0),i-r!=-6&&i-r!=-10||!this.isBlackOrEmpty(a[i])||s[3]-s[1]!=1||(t=!0),i-r!=6&&i-r!=10||!this.isBlackOrEmpty(a[i])||s[3]-s[1]!=-1||(t=!0)),"n"===o&&(i-r!=-17&&i-r!=-15||!this.isWhiteOrEmpty(a[i])||s[3]-s[1]!=2||(t=!0),i-r!=17&&i-r!=15||!this.isWhiteOrEmpty(a[i])||s[3]-s[1]!=-2||(t=!0),i-r!=-6&&i-r!=-10||!this.isWhiteOrEmpty(a[i])||s[3]-s[1]!=1||(t=!0),i-r!=6&&i-r!=10||!this.isWhiteOrEmpty(a[i])||s[3]-s[1]!=-1||(t=!0)),"K"===o&&((58===i&&e.CastlingWq||62===i&&e.CastlingWk)&&60===r?this.lineCheck(r,i,a,o+"0-0")&&this.isEmpty(a[i])&&(t=!0):this.lineCheck(r,i,a,o)&&this.isBlackOrEmpty(a[i])&&(t=!0)),"k"===o&&((2===i&&e.CastlingBq||6===i&&e.CastlingBk)&&4===r?this.lineCheck(r,i,a,o+"0-0")&&this.isEmpty(a[i])&&(t=!0):this.lineCheck(r,i,a,o)&&this.isWhiteOrEmpty(a[i])&&(t=!0)),"Q"!==o&&"R"!==o&&"B"!==o||this.lineCheck(r,i,a,o)&&this.isBlackOrEmpty(a[i])&&(t=!0),"q"!==o&&"r"!==o&&"b"!==o||this.lineCheck(r,i,a,o)&&this.isWhiteOrEmpty(a[i])&&(t=!0)}return e.valid=t,e},makeMove:function(e){var t=e.Fen
if(t){var r=t
t=(t=t.replace(/ .+$/,"")).replace(/\//g,"")
var i=(r=r.replace(/^.+? /,"")).split(" ")
"w"===i[0].toLowerCase()?i[0]="b":i[0]="w"
var n=e.fromIndex,a=e.toIndex,s=e.piecePromotion,o=e.b,l=[]
l[0]=n%8+1,l[1]=8-Math.floor(n/8),l[2]=a%8+1,l[3]=8-Math.floor(a/8),console.log(o)
var f=o[n]
o[n]=1,o[a]=f,"K"===f&&(i[1]=i[1].replace(/K/,""),i[1]=i[1].replace(/Q/,""),62===a&&(o[63]=1,o[61]="R"),58===a&&(o[56]=1,o[59]="R")),"k"===f&&(i[1]=i[1].replace(/k/,""),i[1]=i[1].replace(/q/,""),2===a&&(o[0]=1,o[3]="r"),6===a&&(o[7]=1,o[5]="r")),"R"===f&&(56===n&&(i[1]=i[1].replace(/Q/,"")),63===n&&(i[1]=i[1].replace(/K/,""))),"r"===f&&(0===n&&(i[1]=i[1].replace(/q/,"")),7===n&&(i[1]=i[1].replace(/k/,""))),i[2]="-","P"===f&&(a<8&&(o[a]=s.toUpperCase()),n-a==16&&(i[2]=this.indexToAlgebraic(n-8)),this.algebraicToIndex(e.EnPassant)===a&&(o[a+8]=1)),"p"===f&&(a>55&&(o[a]=s.toLowerCase()),a-n==16&&(i[2]=this.indexToAlgebraic(n+8)),this.algebraicToIndex(e.EnPassant)===a&&(o[a-8]=1)),i[1]||(i[1]="-")
for(var u="",p=0,c=0;c<8;c++){for(var d=0,h=0;h<8;h++){var m=o[p]
p++,isNaN(m)?(d&&(u+=d),u+=m,d=0):d++}d&&(u+=d),c<7&&(u+="/")}u=u+" "+i.join(" ")}return e.b=o,e.Fen=u,e},lineCheck:function(e,t,r,i){var n=!0,a=e%8,s=Math.floor(e/8),o=t%8,l=Math.floor(t/8),f=Math.abs(a-o),u=Math.abs(s-l),p=(t-e)/Math.max(f,u)
if(("Q"===i||"q"===i)&&0!==f&&0!==u&&f!==u)return!1
if(("R"===i||"r"===i)&&0!==f&&0!==u)return!1
if(("B"===i||"b"===i)&&f!==u)return!1
if(("K"===i||"k"===i)&&(f>1||u>1))return!1
if(("K0-0"===i||"k0-0"===i)&&2!==f&&0!==u)return!1
for(var c=e+p;c!==t;c+=p)this.isEmpty(r[c])||(n=!1)
return n},isEmpty:function(e){return 1===e},isBlack:function(e){return"p"===e||"n"===e||"b"===e||"r"===e||"q"===e||"k"===e},isBlackOrEmpty:function(e){return this.isBlack(e)||1===e},isWhite:function(e){return"P"===e||"N"===e||"B"===e||"R"===e||"Q"===e||"K"===e},isWhiteOrEmpty:function(e){return this.isWhite(e)||1===e},uciToNumber:function(e){return e.toLowerCase().charCodeAt(0)-96},fenToMbn:function(e){var t=e.toLowerCase()
return t===e?"b"+t:"w"+t},algebraicToIndex:function(e){var t=e.split("")
if(2===t.length){var r=this.uciToNumber(t[0])
return 8*(8-t[1])+r-1}return-1},indexToAlgebraic:function(e){var t=e%8+1,r=8-Math.floor(e/8)
return String.fromCharCode(t+96)+r},mvToMoveObject:function(e,t,r){var i=e,n=!1
if(t&&t.length>3&&t.length<6){n=!0
var a=t.split(""),s=[]
s[0]=a[0]+a[1],s[1]=a[2]+a[3],s[2]=a[4],i.fromIndex=this.algebraicToIndex(s[0]),i.toIndex=this.algebraicToIndex(s[1]),s[2]&&(i.piecePromotion=s[2].toLowerCase()),i.b=r}return i.valid=n,i},actions:{playMove:function(){var e=Ember.get(this,"move"),t=Ember.get(this,"fenInfo"),r=Ember.get(this,"boardArray").toArray(),i=this.mvToMoveObject(t,e,r),n=this.makeMove(i)
Ember.set(this,"fen",n.Fen)}}})}),define("pwschess/helpers/app-version",["exports","pwschess/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,r){function i(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.default.APP.version,a=i.versionOnly||i.hideSha,s=i.shaOnly||i.hideVersion,o=null
return a&&(i.showExtended&&(o=n.match(r.versionExtendedRegExp)),o||(o=n.match(r.versionRegExp))),s&&(o=n.match(r.shaRegExp)),o?o[0]:n}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=i,e.default=Ember.Helper.helper(i)}),define("pwschess/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("pwschess/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("pwschess/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","pwschess/config/environment"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0})
var i=void 0,n=void 0
r.default.APP&&(i=r.default.APP.name,n=r.default.APP.version),e.default={name:"App Version",initialize:(0,t.default)(i,n)}}),define("pwschess/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("pwschess/initializers/ember-data",["exports","ember-data/setup-container","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("pwschess/initializers/export-application-global",["exports","pwschess/config/environment"],function(e,t){function r(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var r
if("undefined"!=typeof window)r=window
else if("undefined"!=typeof global)r=global
else{if("undefined"==typeof self)return
r=self}var i,n=t.default.exportApplicationGlobal
i="string"==typeof n?n:Ember.String.classify(t.default.modulePrefix),r[i]||(r[i]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete r[i]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=r,e.default={name:"export-application-global",initialize:r}}),define("pwschess/instance-initializers/ember-data",["exports","ember-data/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("pwschess/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("pwschess/router",["exports","pwschess/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var r=Ember.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL})
r.map(function(){}),e.default=r}),define("pwschess/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("pwschess/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"SyYMVdqW",block:'{"symbols":["tile"],"statements":[[7,"div"],[11,"class","row"],[9],[0,"\\n\\n"],[7,"div"],[11,"class","column1"],[9],[0,"\\n"],[1,[27,"input",null,[["type","value","placeholder","size"],["text",[23,["fen"]],"Vul hier een FEN in",60]]],false],[0," "],[7,"br"],[9],[10],[0,"\\n\\n"],[1,[27,"input",null,[["class","type","value","placeholder","size"],[[27,"unless",[[23,["validMove"]],"valid"],null],"text",[23,["move"]],"",30]]],false],[0,"\\n"],[7,"button"],[3,"action",[[22,0,[]],"playMove"]],[9],[0,"Move"],[10],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[11,"class","board column2"],[9],[0,"\\n"],[4,"each",[[23,["tiles"]]],null,{"statements":[[0,"       "],[7,"div"],[12,"class",[22,1,[]]],[9],[10],[0,"\\n"]],"parameters":[1]},null],[10],[0,"\\n"],[7,"div"],[11,"class","column3"],[9],[0,"\\n"],[4,"if",[[23,["fenInfo","FenTrue"]]],null,{"statements":[[7,"b"],[9],[0,"To Move :"],[10],[0," "],[1,[23,["fenInfo","ToMove"]],false],[7,"br"],[9],[10],[0,"\\n"],[7,"h4"],[9],[0,"Castling Availabilty"],[10],[0,"\\n"],[7,"b"],[9],[0,"White Long: "],[10],[4,"if",[[23,["fenInfo","CastlingWq"]]],null,{"statements":[[0,"True"]],"parameters":[]},{"statements":[[0,"False"]],"parameters":[]}],[7,"br"],[9],[10],[0,"\\n"],[7,"b"],[9],[0,"White Short: "],[10],[4,"if",[[23,["fenInfo","CastlingWk"]]],null,{"statements":[[0,"True"]],"parameters":[]},{"statements":[[0,"False"]],"parameters":[]}],[7,"br"],[9],[10],[0,"\\n"],[7,"b"],[9],[0,"Black Long: "],[10],[4,"if",[[23,["fenInfo","CastlingBq"]]],null,{"statements":[[0,"True"]],"parameters":[]},{"statements":[[0,"False"]],"parameters":[]}],[7,"br"],[9],[10],[0,"\\n"],[7,"b"],[9],[0,"Black Short: "],[10],[4,"if",[[23,["fenInfo","CastlingBk"]]],null,{"statements":[[0,"True"]],"parameters":[]},{"statements":[[0,"False"]],"parameters":[]}],[7,"br"],[9],[10],[0,"\\n"],[7,"b"],[9],[0,"En passant target: "],[10],[1,[23,["fenInfo","EnPassant"]],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"],[1,[21,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"pwschess/templates/application.hbs"}})}),define("pwschess/config/environment",[],function(){try{var e="pwschess/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),r={default:JSON.parse(unescape(t))}
return Object.defineProperty(r,"__esModule",{value:!0}),r}catch(t){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("pwschess/app").default.create({name:"pwschess",version:"0.0.0+be3c44f7"})
